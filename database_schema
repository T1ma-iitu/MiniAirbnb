!!!Mini Airbnb Database Schema!!!
!!!PostgreSQL Database!!!


DROP TABLE IF EXISTS favorites CASCADE;
DROP TABLE IF EXISTS bookings CASCADE;
DROP TABLE IF EXISTS listings CASCADE;
DROP TABLE IF EXISTS users CASCADE;

CREATE TABLE users (
    id SERIAL PRIMARY KEY,
    name VARCHAR(100) NOT NULL,
    email VARCHAR(100) UNIQUE NOT NULL,
    password VARCHAR(255) NOT NULL,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE listings (
    id SERIAL PRIMARY KEY,
    title VARCHAR(200) NOT NULL,
    description TEXT,
    city VARCHAR(100) NOT NULL,
    type VARCHAR(50) NOT NULL,
    rooms INTEGER DEFAULT 1,
    guests INTEGER DEFAULT 1,
    bedrooms INTEGER DEFAULT 1,
    beds INTEGER DEFAULT 1,
    bathrooms INTEGER DEFAULT 1,
    price INTEGER NOT NULL,
    rating DECIMAL(3,2) DEFAULT 0.0,
    reviews_count INTEGER DEFAULT 0,
    emoji VARCHAR(10) DEFAULT 'üè†',
    amenities TEXT,
    views_count INTEGER DEFAULT 0,
    owner_id INTEGER REFERENCES users(id) ON DELETE CASCADE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE bookings (
    id SERIAL PRIMARY KEY,
    listing_id INTEGER NOT NULL REFERENCES listings(id) ON DELETE CASCADE,
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    check_in_date DATE NOT NULL,
    check_out_date DATE NOT NULL,
    guests_count INTEGER NOT NULL,
    total_price INTEGER NOT NULL,
    status VARCHAR(20) DEFAULT 'pending',
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP
);

CREATE TABLE favorites (
    id SERIAL PRIMARY KEY,
    user_id INTEGER NOT NULL REFERENCES users(id) ON DELETE CASCADE,
    listing_id INTEGER NOT NULL REFERENCES listings(id) ON DELETE CASCADE,
    created_at TIMESTAMP DEFAULT CURRENT_TIMESTAMP,
    UNIQUE(user_id, listing_id)
);

CREATE INDEX idx_users_email ON users(email);
CREATE INDEX idx_listings_city ON listings(city);
CREATE INDEX idx_listings_price ON listings(price);
CREATE INDEX idx_bookings_user ON bookings(user_id);
CREATE INDEX idx_bookings_listing ON bookings(listing_id);
CREATE INDEX idx_favorites_user ON favorites(user_id);
CREATE INDEX idx_favorites_listing ON favorites(listing_id);

INSERT INTO users (name, email, password) VALUES
('–ê–π–∂–∞–Ω –ö–∞—Å—ã–º–æ–≤–∞', 'aizhan@mail.kz', 'password123'),
('–ù—É—Ä–ª–∞–Ω –ê–±–¥—É–ª–ª–∏–Ω', 'nurlan@mail.kz', 'password123'),
('–î–∏–Ω–∞ –°–∞—Ä—Å–µ–Ω–æ–≤–∞', 'dina@mail.kz', 'password123'),
('–ê—Ä–º–∞–Ω –¢–æ–∫–∞–µ–≤', 'arman@mail.kz', 'password123');

INSERT INTO listings (title, description, city, type, rooms, guests, bedrooms, beds, bathrooms, price, rating, reviews_count, emoji, amenities, owner_id) VALUES
('–£—é—Ç–Ω–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞ —É –º–æ—Ä—è',
 '–ü—Ä–µ–∫—Ä–∞—Å–Ω–∞—è –∫–≤–∞—Ä—Ç–∏—Ä–∞ —Å –≤–∏–¥–æ–º –Ω–∞ –≥–æ—Ä—ã. –ò–¥–µ–∞–ª—å–Ω–æ –ø–æ–¥—Ö–æ–¥–∏—Ç –¥–ª—è –ø–∞—Ä—ã –∏–ª–∏ –Ω–µ–±–æ–ª—å—à–æ–π —Å–µ–º—å–∏. –í —à–∞–≥–æ–≤–æ–π –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç–∏ –∫–∞—Ñ–µ, —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã –∏ —Ç–æ—Ä–≥–æ–≤—ã–µ —Ü–µ–Ω—Ç—Ä—ã.',
 '–ê–ª–º–∞—Ç—ã, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω', '–ö–≤–∞—Ä—Ç–∏—Ä–∞', 1, 2, 1, 1, 1, 15000, 4.95, 128, 'üèñÔ∏è',
 'Wi-Fi, –ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä, –ö—É—Ö–Ω—è, –°—Ç–∏—Ä–∞–ª—å–Ω–∞—è –º–∞—à–∏–Ω–∞, –¢–µ–ª–µ–≤–∏–∑–æ—Ä, –ü–∞—Ä–∫–æ–≤–∫–∞', 1),

('–î–æ–º–∏–∫ –≤ –≥–æ—Ä–∞—Ö',
 '–£—é—Ç–Ω—ã–π –¥–æ–º–∏–∫ –≤ –≥–æ—Ä–∞—Ö —Å –ø–æ—Ç—Ä—è—Å–∞—é—â–∏–º –≤–∏–¥–æ–º. –ò–¥–µ–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è —Ç–µ—Ö, –∫—Ç–æ —Ö–æ—á–µ—Ç –æ—Ç–¥–æ—Ö–Ω—É—Ç—å –æ—Ç –≥–æ—Ä–æ–¥—Å–∫–æ–π —Å—É–µ—Ç—ã. –ß–∏—Å—Ç—ã–π –≥–æ—Ä–Ω—ã–π –≤–æ–∑–¥—É—Ö –∏ —Ç–∏—à–∏–Ω–∞.',
 '–ê–ª–º–∞—Ç—ã, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω', '–î–æ–º', 2, 4, 2, 3, 1, 25000, 4.87, 96, 'üèîÔ∏è',
 'Wi-Fi, –ö–∞–º–∏–Ω, –ö—É—Ö–Ω—è, –ì—Ä–∏–ª—å, –ü–∞—Ä–∫–æ–≤–∫–∞, –¢–µ—Ä—Ä–∞—Å–∞, –û—Ç–æ–ø–ª–µ–Ω–∏–µ', 1),

('–°—Ç—É–¥–∏—è –≤ —Ü–µ–Ω—Ç—Ä–µ –≥–æ—Ä–æ–¥–∞',
 '–°–æ–≤—Ä–µ–º–µ–Ω–Ω–∞—è —Å—Ç—É–¥–∏—è –≤ —Å–∞–º–æ–º —Ü–µ–Ω—Ç—Ä–µ –ê–ª–º–∞—Ç—ã. –†—è–¥–æ–º –º–µ—Ç—Ä–æ, —Ç–æ—Ä–≥–æ–≤—ã–µ —Ü–µ–Ω—Ç—Ä—ã, —Ä–µ—Å—Ç–æ—Ä–∞–Ω—ã. –í—Å—ë –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ–µ –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è.',
 '–ê–ª–º–∞—Ç—ã, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω', '–°—Ç—É–¥–∏—è', 1, 2, 1, 1, 1, 20000, 4.92, 203, 'üèôÔ∏è',
 'Wi-Fi, –ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä, –ö—É—Ö–Ω—è, –õ–∏—Ñ—Ç, –ö–æ–Ω—Å—å–µ—Ä–∂, –ü–∞—Ä–∫–æ–≤–∫–∞, Smart TV', 2),

('–ó–∞–≥–æ—Ä–æ–¥–Ω—ã–π –¥–æ–º',
 '–ü—Ä–æ—Å—Ç–æ—Ä–Ω—ã–π –∑–∞–≥–æ—Ä–æ–¥–Ω—ã–π –¥–æ–º –¥–ª—è –±–æ–ª—å—à–æ–π —Å–µ–º—å–∏ –∏–ª–∏ –∫–æ–º–ø–∞–Ω–∏–∏ –¥—Ä—É–∑–µ–π. –ë–æ–ª—å—à–∞—è —Ç–µ—Ä—Ä–∏—Ç–æ—Ä–∏—è, –º–∞–Ω–≥–∞–ª, –±–µ—Å–µ–¥–∫–∞. –ò–¥–µ–∞–ª—å–Ω–æ –¥–ª—è –æ—Ç–¥—ã—Ö–∞ –Ω–∞ –ø—Ä–∏—Ä–æ–¥–µ.',
 '–ê–ª–º–∞—Ç–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å', '–î–æ–º', 3, 6, 3, 4, 2, 35000, 5.0, 45, 'üè°',
 'Wi-Fi, –ö—É—Ö–Ω—è, –ì—Ä–∏–ª—å, –ë–∞—Å—Å–µ–π–Ω, –°–∞–¥, –ü–∞—Ä–∫–æ–≤–∫–∞, –î–µ—Ç—Å–∫–∞—è –ø–ª–æ—â–∞–¥–∫–∞, –ë–∞–Ω—è', 2),

('–ê–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã –∫–ª–∞—Å—Å–∞ –ª—é–∫—Å',
 '–†–æ—Å–∫–æ—à–Ω—ã–µ –∞–ø–∞—Ä—Ç–∞–º–µ–Ω—Ç—ã —Å –ø–∞–Ω–æ—Ä–∞–º–Ω—ã–º –≤–∏–¥–æ–º –Ω–∞ –≥–æ—Ä–æ–¥. –ü—Ä–µ–º–∏—É–º-–∫–ª–∞—Å—Å –æ—Ç–¥–µ–ª–∫–∏, –¥–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∞—è –º–µ–±–µ–ª—å, –≤—Å–µ —É–¥–æ–±—Å—Ç–≤–∞ –¥–ª—è –∫–æ–º—Ñ–æ—Ä—Ç–Ω–æ–≥–æ –ø—Ä–æ–∂–∏–≤–∞–Ω–∏—è.',
 '–ê–ª–º–∞—Ç—ã, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω', '–ö–≤–∞—Ä—Ç–∏—Ä–∞', 1, 3, 1, 2, 1, 40000, 4.78, 312, 'üè®',
 'Wi-Fi, –ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä, –ö—É—Ö–Ω—è, –î–∂–∞–∫—É–∑–∏, –¢—Ä–µ–Ω–∞–∂—ë—Ä–Ω—ã–π –∑–∞–ª, –ö–æ–Ω—Å—å–µ—Ä–∂, –ü–∞—Ä–∫–æ–≤–∫–∞, Smart TV', 3),

('–ö–æ—Ç—Ç–µ–¥–∂ –≤ –ª–µ—Å—É',
 '–£—é—Ç–Ω—ã–π –∫–æ—Ç—Ç–µ–¥–∂ –≤ –ª–µ—Å–Ω–æ–π –∑–æ–Ω–µ. –ò–¥–µ–∞–ª—å–Ω–æ–µ –º–µ—Å—Ç–æ –¥–ª—è –ª—é–±–∏—Ç–µ–ª–µ–π –ø—Ä–∏—Ä–æ–¥—ã –∏ –∞–∫—Ç–∏–≤–Ω–æ–≥–æ –æ—Ç–¥—ã—Ö–∞. –†—è–¥–æ–º –µ—Å—Ç—å –æ–∑–µ—Ä–æ, —Ç—Ä–æ–ø—ã –¥–ª—è –ø–µ—à–∏—Ö –ø—Ä–æ–≥—É–ª–æ–∫.',
 '–ê–ª–º–∞—Ç–∏–Ω—Å–∫–∞—è –æ–±–ª–∞—Å—Ç—å', '–ö–æ—Ç—Ç–µ–¥–∂', 2, 5, 2, 3, 2, 30000, 4.89, 67, 'üå≤',
 'Wi-Fi, –ö–∞–º–∏–Ω, –ö—É—Ö–Ω—è, –ì—Ä–∏–ª—å, –¢–µ—Ä—Ä–∞—Å–∞, –û—Ç–æ–ø–ª–µ–Ω–∏–µ, –ü–∞—Ä–∫–æ–≤–∫–∞, –ë–∞–Ω—è', 3),

('–õ–æ—Ñ—Ç –≤ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–º —Ü–µ–Ω—Ç—Ä–µ',
 '–°—Ç–∏–ª—å–Ω—ã–π –ª–æ—Ñ—Ç —Å –≤—ã—Å–æ–∫–∏–º–∏ –ø–æ—Ç–æ–ª–∫–∞–º–∏ –≤ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–æ–º –∑–¥–∞–Ω–∏–∏. –£–Ω–∏–∫–∞–ª—å–Ω—ã–π –¥–∏–∑–∞–π–Ω, —Å–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–µ —É–¥–æ–±—Å—Ç–≤–∞, –∞—Ç–º–æ—Å—Ñ–µ—Ä–∞ —Ç–≤–æ—Ä—á–µ—Å—Ç–≤–∞.',
 '–ê–ª–º–∞—Ç—ã, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω', '–õ–æ—Ñ—Ç', 1, 3, 1, 2, 1, 28000, 4.85, 89, 'üé®',
 'Wi-Fi, –ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä, –ö—É—Ö–Ω—è, –í—ã—Å–æ–∫–∏–µ –ø–æ—Ç–æ–ª–∫–∏, –î–∏–∑–∞–π–Ω–µ—Ä—Å–∫–∏–π –∏–Ω—Ç–µ—Ä—å–µ—Ä, –ü–∞—Ä–∫–æ–≤–∫–∞', 4),

('–ü–µ–Ω—Ç—Ö–∞—É—Å —Å —Ç–µ—Ä—Ä–∞—Å–æ–π',
 '–†–æ—Å–∫–æ—à–Ω—ã–π –ø–µ–Ω—Ç—Ö–∞—É—Å –Ω–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–º —ç—Ç–∞–∂–µ —Å –æ–≥—Ä–æ–º–Ω–æ–π —Ç–µ—Ä—Ä–∞—Å–æ–π. –ó–∞—Ö–≤–∞—Ç—ã–≤–∞—é—â–∏–π –≤–∏–¥ –Ω–∞ –≥–æ—Ä—ã –∏ –≥–æ—Ä–æ–¥. –î–ª—è —Å–∞–º—ã—Ö –≤–∑—ã—Å–∫–∞—Ç–µ–ª—å–Ω—ã—Ö –≥–æ—Å—Ç–µ–π.',
 '–ê–ª–º–∞—Ç—ã, –ö–∞–∑–∞—Ö—Å—Ç–∞–Ω', '–ü–µ–Ω—Ç—Ö–∞—É—Å', 2, 4, 2, 3, 2, 50000, 4.98, 156, 'üåü',
 'Wi-Fi, –ö–æ–Ω–¥–∏—Ü–∏–æ–Ω–µ—Ä, –ö—É—Ö–Ω—è, –¢–µ—Ä—Ä–∞—Å–∞, –î–∂–∞–∫—É–∑–∏, –°–∞—É–Ω–∞, –ö–æ–Ω—Å—å–µ—Ä–∂, –ü–∞—Ä–∫–æ–≤–∫–∞, –ü–∞–Ω–æ—Ä–∞–º–Ω—ã–µ –æ–∫–Ω–∞', 4);

INSERT INTO bookings (listing_id, user_id, check_in_date, check_out_date, guests_count, total_price, status) VALUES
(1, 2, '2024-12-25', '2024-12-27', 2, 30000, 'confirmed'),
(2, 3, '2024-12-28', '2024-12-30', 4, 50000, 'confirmed'),
(3, 4, '2024-12-22', '2024-12-24', 2, 40000, 'pending'),
(5, 2, '2025-01-05', '2025-01-08', 3, 120000, 'confirmed');

INSERT INTO favorites (user_id, listing_id) VALUES
(2, 1),
(2, 5),
(3, 2),
(3, 4);

SELECT '–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö —É—Å–ø–µ—à–Ω–æ —Å–æ–∑–¥–∞–Ω–∞!' as message;
SELECT '–ü–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π: ' || COUNT(*) as info FROM users;
SELECT '–û–±—ä—è–≤–ª–µ–Ω–∏–π: ' || COUNT(*) as info FROM listings;
SELECT '–ë—Ä–æ–Ω–∏—Ä–æ–≤–∞–Ω–∏–π: ' || COUNT(*) as info FROM bookings;
SELECT '–í –∏–∑–±—Ä–∞–Ω–Ω–æ–º: ' || COUNT(*) as info FROM favorites;